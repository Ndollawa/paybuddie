function loancalculate(){var a=jQuery("#emi-principal-show").text(),t=12*jQuery("#emi-totalyear-show").text(),e=jQuery("#emi-interest-show").text(),i=e/100/12,n=Math.pow(1+i,t),l=a*i*(n/(n-1)),i=t*l,n=i-a,t=n/i*100;$("#tbl_int-pge").html(t.toFixed(2)+" %"),$("#tbl_loan_pge").html(100-t.toFixed(2)+" %");t=l.toFixed(2).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),a.toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),i=i.toFixed(2).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),n=n.toFixed(2).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");$input_principal=$("#emi-principal-input").val().toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),jQuery("#monthly-emi").html(t),jQuery("#total-interest").html(n),jQuery("#total-amount").html(i),jQuery("#emi-principal-input").val($input_principal),amortization_calculator(a,l,e),$(".datepicker").datepicker({autoclose:!0,format:"MM yyyy",minViewMode:1}),$("#start-date").change(function(){amortization_calculator(a,l,e)})}function principal_value(a=3e5){$text_val=a.toString(),$new_text_val=parseInt($text_val.replace(/,/g,"")),$("#emi-principal-slide").slider({range:"min",min:1e5,max:2e7,value:$new_text_val,step:1e5,slide:function(a,t){$("#emi-principal-show").text(t.value),$("#emi-principal-input").val(t.value)},change:function(a,t){loancalculate()}}),$("#emi-principal-show").text($("#emi-principal-slide").slider("value")),$("#emi-principal-input").val($("#emi-principal-slide").slider("value")),loancalculate()}function loan_year_value(){$loan_year=$("#emi-year-input").val(),$("#emi-year-slide").slider({range:"min",min:2,max:35,value:$loan_year,step:1,slide:function(a,t){$("#emi-totalyear-show").text(t.value),$("#emi-year-input").val(t.value)},change:function(a,t){loancalculate()}}),$("#emi-totalyear-show").text($("#emi-year-slide").slider("value")),$("#emi-year-input").val($("#emi-year-slide").slider("value")),loancalculate()}function interest_value(){$loan_rate=$("#interest-rate-input").val(),$("#emi-interest-slide").slider({range:"min",min:6,max:12,value:$loan_rate,step:.1,slide:function(a,t){$("#emi-interest-show").text(t.value),$("#interest-rate-input").val(t.value)},change:function(a,t){loancalculate()}}),$("#emi-interest-show").text($("#emi-interest-slide").slider("value")),$("#interest-rate-input").val($("#emi-interest-slide").slider("value")),loancalculate()}function amortization_calculator(a,t,e){var n=$("#start-date").val(),l=["January","Fabuary","March","April","May","June","July","August","September","October","November","December"],n=new Date(n);let r=n.getMonth(),s=n.getFullYear();i=e/100;let o="",c=a,u=0,p=[],d=[],m=[];for(o+='<div class="amortization-column-outer">',o+='<div class="amortization-column sum">',o+='<div class="amortization-data year-outer"><i class="fas fa-plus-circle"></i><span>'+s+"</span></div>",o+='<div class="amortization-data principal-sum"></div>',o+='<div class="amortization-data interest-sum"></div>',o+='<div class="amortization-data total-payment-sum"></div>',o+='<div class="amortization-data balance-sum"></div>',o+="</div>",o+='<div class="amortization-column-inner">';0<c;){var v=l[r]+" "+s;let a=i/12*c;t>c&&(t=c+a);var h=t-a;u+=a,c-=h,principal_paid=t-a;var g=principal_paid.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),y=a.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),f=t.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),h=c.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");o+='<div class="amortization-column">',o+='<div class="amortization-data year">'+v+"</div>",o+='<div class="amortization-data principal">$<span>'+g+"</span></div>",o+='<div class="amortization-data interest">$<span>'+y+"</span></div>",o+='<div class="amortization-data total-payment">$<span>'+f+"</span></div>",o+='<div class="amortization-data balance">$<span>'+h+"</span></div>",o+="</div>",r++,12<=r&&(r=0,s++,o+="</div>",o+="</div>",o+="<div class=amortization-column-outer>",o+='<div class="amortization-column sum">',o+='<div class="amortization-data year-outer"><i class="fas fa-plus-circle"></i><span>'+s+"</span></div>",o+='<div class="amortization-data principal-sum"></div>',o+='<div class="amortization-data interest-sum"></div>',o+='<div class="amortization-data total-payment-sum"></div>',o+='<div class="amortization-data balance-sum"></div>',o+="</div>",o+='<div class="amortization-column-inner">')}$(".amortization-content").html(o),$(".amortization-column-outer").each(function(){""==$(this).find(".amortization-column-inner").html()&&$(this).remove()}),$(".amortization-column-outer").each(function(){var t=0,e=0,i=0,n=0;$(this).find(".amortization-column-inner .amortization-column").each(function(){var a=$(this).find(".principal span").html(),a=parseInt(a.replace(/,/g,""));t+=a;a=$(this).find(".interest span").html(),a=parseInt(a.replace(/,/g,""));e+=a;a=$(this).find(".total-payment span").html(),a=parseInt(a.replace(/,/g,""));i+=a;a=$(this).find(".balance span").html(),a=parseInt(a.replace(/,/g,""));n+=a});var a=t.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),l=e.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),r=i.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),o=n.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");$(this).find(".principal-sum").html("$<span>"+a+"</span>"),$(this).find(".interest-sum").html("$<span>"+l+"</span>"),$(this).find(".total-payment-sum").html("$<span>"+r+"</span>"),$(this).find(".balance-sum").html("$<span>"+o+"</span>"),s=$(this).find(".year-outer span").html(),p.push(s),d.push(Math.floor(t)),m.push(Math.floor(e)),chart_render(p,d,m)}),$(".amortization-column-inner").slideUp(0),$(".amortization-data.year-outer").on("click",function(){$(this).parent().siblings(".amortization-column-inner").slideToggle(500),$(this).find("i").toggleClass("fa-plus-circle"),$(this).find("i").toggleClass("fa-minus-circle")})}function round(a,t){return(Math.round(a*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}function chart_render(a,t,e){t={chart:{type:"column"},title:{text:""},xAxis:{categories:a},yAxis:{allowDecimals:!1,min:0,title:{text:"Balance"},labels:{formatter:function(){return"$"+this.axis.defaultLabelFormatter.call(this)}}},tooltip:{formatter:function(){return y_str=this.y.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),stacktotal_str=this.point.stackTotal.toFixed(0).toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),"<b>Year: "+this.x+"</b><br/>"+this.series.name+": $"+y_str+"<br/>Total Payment: $"+stacktotal_str}},plotOptions:{column:{stacking:"normal"}},series:[{name:"Interest",data:e,color:"#f7c35f"},{name:"Principal",data:t,color:"#e63a27"}]};Highcharts.chart("loan-chart-amortization",t),Highcharts.setOptions({lang:{numericSymbols:null,thousandsSep:","}})}function onlynumeric(a){a=a.which||a.keycode;return 48<=a&&a<=57||46==a}$("#home-loan-calculator").length&&jQuery(function(e){e(".scroll-to-chart").length&&e(".scroll-to-chart").on("click",function(){return $target=e(this).data("target"),e("html,body").animate({scrollTop:e("#loan-chart-amortization").offset().top-200},1e3),!1});var a=new Date,t=a.getFullYear(),a=["January","Fabuary","March","April","May","June","July","August","September","October","November","December"][a.getMonth()];e("#start-date").val(a+" "+t),principal_value(),e("#emi-principal-input").on("keyup",function(a){$principal_slider_value=e("#emi-principal-input").val(),13===a.keyCode&&principal_value($principal_slider_value)}),e("#emi-principal-input").blur(function(){$principal_slider_value=e("#emi-principal-input").val(),principal_value($principal_slider_value)}),e("#emi-year-slide").slider({range:"min",min:2,max:35,value:10,step:1,slide:function(a,t){e("#emi-totalyear-show").text(t.value),e("#emi-year-input").val(t.value)},change:function(a,t){loancalculate()}}),e("#emi-totalyear-show").text(e("#emi-year-slide").slider("value")),e("#emi-year-input").val(e("#emi-year-slide").slider("value")),e("#emi-year-input").on("keyup",function(a){13===a.keyCode&&loan_year_value()}),e("#emi-year-input").blur(function(){loan_year_value()}),e("#emi-interest-slide").slider({range:"min",min:6,max:12,value:8,step:.01,slide:function(a,t){e("#emi-interest-show").text(t.value),e("#interest-rate-input").val(t.value)},change:function(a,t){loancalculate()}}),e("#emi-interest-show").text(e("#emi-interest-slide").slider("value")),e("#interest-rate-input").val(e("#emi-interest-slide").slider("value")),e("#interest-rate-input").on("keyup",function(a){13===a.keyCode&&interest_value()}),e("#interest-rate-input").blur(function(){interest_value()}),loancalculate()});